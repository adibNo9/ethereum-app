{"ast":null,"code":"import { trim } from '../../utils/data/trim.js';\nexport function isEmpty(value) {\n  return value === 0 || value === 0n || value === undefined || value === null || value === '0' || value === '' || typeof value === 'string' && (trim(value).toLowerCase() === '0x' || trim(value).toLowerCase() === '0x00');\n}\nexport function isPresent(value) {\n  return !isEmpty(value);\n}\nexport function isEIP1559(transaction) {\n  return isPresent(transaction.maxFeePerGas) && isPresent(transaction.maxPriorityFeePerGas);\n}\n// process as CIP42 if any of these fields are present. realistically gatewayfee is not used but is part of spec\nexport function isCIP42(transaction) {\n  // Enable end-user to force the tx to be considered as a cip42\n  if (transaction.type === 'cip42') {\n    return true;\n  }\n  return isEIP1559(transaction) && (isPresent(transaction.feeCurrency) || isPresent(transaction.gatewayFeeRecipient) || isPresent(transaction.gatewayFee));\n}\nexport function isCIP64(transaction) {\n  /*\n   * Enable end user to force the tx to be considered as a CIP-64.\n   *\n   * The preliminary type will be determined as \"eip1559\" by src/utils/transaction/getTransactionType.ts\n   * and so we need the logic below to check for the specific value instead of checking if just any\n   * transaction type is provided. If that's anything else than \"cip64\" then we need to reevaluate the\n   * type based on the transaction fields.\n   *\n   * Modify with caution and according to https://github.com/celo-org/celo-proposals/blob/master/CIPs/cip-0064.md\n   */\n  if (transaction.type === 'cip64') {\n    return true;\n  }\n  return isEIP1559(transaction) && isPresent(transaction.feeCurrency) && isEmpty(transaction.gatewayFee) && isEmpty(transaction.gatewayFeeRecipient);\n}","map":{"version":3,"names":["trim","isEmpty","value","undefined","toLowerCase","isPresent","isEIP1559","transaction","maxFeePerGas","maxPriorityFeePerGas","isCIP42","type","feeCurrency","gatewayFeeRecipient","gatewayFee","isCIP64"],"sources":["/home/adib-alpha/projects/ethereum-app/node_modules/viem/chains/celo/utils.ts"],"sourcesContent":["import type { Address } from 'abitype'\nimport { trim } from '../../utils/data/trim.js'\nimport type {\n  CeloTransactionRequest,\n  CeloTransactionSerializable,\n  TransactionSerializableCIP42,\n  TransactionSerializableCIP64,\n} from './types.js'\n\nexport function isEmpty(\n  value: string | undefined | number | BigInt,\n): value is undefined {\n  return (\n    value === 0 ||\n    value === 0n ||\n    value === undefined ||\n    value === null ||\n    value === '0' ||\n    value === '' ||\n    (typeof value === 'string' &&\n      (trim(value as Address).toLowerCase() === '0x' ||\n        trim(value as Address).toLowerCase() === '0x00'))\n  )\n}\n\nexport function isPresent(\n  value: string | undefined | number | BigInt,\n): value is string | number | BigInt {\n  return !isEmpty(value)\n}\n\nexport function isEIP1559(\n  transaction: CeloTransactionSerializable | CeloTransactionRequest,\n): boolean {\n  return (\n    isPresent(transaction.maxFeePerGas) &&\n    isPresent(transaction.maxPriorityFeePerGas)\n  )\n}\n\n// process as CIP42 if any of these fields are present. realistically gatewayfee is not used but is part of spec\nexport function isCIP42(\n  transaction: CeloTransactionSerializable | CeloTransactionRequest,\n): transaction is TransactionSerializableCIP42 {\n  // Enable end-user to force the tx to be considered as a cip42\n  if (transaction.type === 'cip42') {\n    return true\n  }\n\n  return (\n    isEIP1559(transaction) &&\n    (isPresent(transaction.feeCurrency) ||\n      isPresent(transaction.gatewayFeeRecipient) ||\n      isPresent(transaction.gatewayFee))\n  )\n}\n\nexport function isCIP64(\n  transaction: CeloTransactionSerializable | CeloTransactionRequest,\n): transaction is TransactionSerializableCIP64 {\n  /*\n   * Enable end user to force the tx to be considered as a CIP-64.\n   *\n   * The preliminary type will be determined as \"eip1559\" by src/utils/transaction/getTransactionType.ts\n   * and so we need the logic below to check for the specific value instead of checking if just any\n   * transaction type is provided. If that's anything else than \"cip64\" then we need to reevaluate the\n   * type based on the transaction fields.\n   *\n   * Modify with caution and according to https://github.com/celo-org/celo-proposals/blob/master/CIPs/cip-0064.md\n   */\n  if (transaction.type === 'cip64') {\n    return true\n  }\n\n  return (\n    isEIP1559(transaction) &&\n    isPresent(transaction.feeCurrency) &&\n    isEmpty(transaction.gatewayFee) &&\n    isEmpty(transaction.gatewayFeeRecipient)\n  )\n}\n"],"mappings":"AACA,SAASA,IAAI,QAAQ,0BAA0B;AAQ/C,OAAM,SAAUC,OAAOA,CACrBC,KAA2C;EAE3C,OACEA,KAAK,KAAK,CAAC,IACXA,KAAK,KAAK,EAAE,IACZA,KAAK,KAAKC,SAAS,IACnBD,KAAK,KAAK,IAAI,IACdA,KAAK,KAAK,GAAG,IACbA,KAAK,KAAK,EAAE,IACX,OAAOA,KAAK,KAAK,QAAQ,KACvBF,IAAI,CAACE,KAAgB,CAAC,CAACE,WAAW,EAAE,KAAK,IAAI,IAC5CJ,IAAI,CAACE,KAAgB,CAAC,CAACE,WAAW,EAAE,KAAK,MAAM,CAAE;AAEzD;AAEA,OAAM,SAAUC,SAASA,CACvBH,KAA2C;EAE3C,OAAO,CAACD,OAAO,CAACC,KAAK,CAAC;AACxB;AAEA,OAAM,SAAUI,SAASA,CACvBC,WAAiE;EAEjE,OACEF,SAAS,CAACE,WAAW,CAACC,YAAY,CAAC,IACnCH,SAAS,CAACE,WAAW,CAACE,oBAAoB,CAAC;AAE/C;AAEA;AACA,OAAM,SAAUC,OAAOA,CACrBH,WAAiE;EAEjE;EACA,IAAIA,WAAW,CAACI,IAAI,KAAK,OAAO,EAAE;IAChC,OAAO,IAAI;;EAGb,OACEL,SAAS,CAACC,WAAW,CAAC,KACrBF,SAAS,CAACE,WAAW,CAACK,WAAW,CAAC,IACjCP,SAAS,CAACE,WAAW,CAACM,mBAAmB,CAAC,IAC1CR,SAAS,CAACE,WAAW,CAACO,UAAU,CAAC,CAAC;AAExC;AAEA,OAAM,SAAUC,OAAOA,CACrBR,WAAiE;EAEjE;;;;;;;;;;EAUA,IAAIA,WAAW,CAACI,IAAI,KAAK,OAAO,EAAE;IAChC,OAAO,IAAI;;EAGb,OACEL,SAAS,CAACC,WAAW,CAAC,IACtBF,SAAS,CAACE,WAAW,CAACK,WAAW,CAAC,IAClCX,OAAO,CAACM,WAAW,CAACO,UAAU,CAAC,IAC/Bb,OAAO,CAACM,WAAW,CAACM,mBAAmB,CAAC;AAE5C"},"metadata":{},"sourceType":"module","externalDependencies":[]}